{
  "version": 3,
  "sources": ["../../@mapbox/mapbox-gl-sync-move/index.js", "../../@maplibre/maplibre-gl-compare/index.js"],
  "sourcesContent": ["function moveToMapPosition (master, clones) {\n  var center = master.getCenter();\n  var zoom = master.getZoom();\n  var bearing = master.getBearing();\n  var pitch = master.getPitch();\n\n  clones.forEach(function (clone) {\n    clone.jumpTo({\n      center: center,\n      zoom: zoom,\n      bearing: bearing,\n      pitch: pitch\n    });\n  });\n}\n\n// Sync movements of two maps.\n//\n// All interactions that result in movement end up firing\n// a \"move\" event. The trick here, though, is to\n// ensure that movements don't cycle from one map\n// to the other and back again, because such a cycle\n// - could cause an infinite loop\n// - prematurely halts prolonged movements like\n//   double-click zooming, box-zooming, and flying\nfunction syncMaps () {\n  var maps;\n  var argLen = arguments.length;\n  if (argLen === 1) {\n    maps = arguments[0];\n  } else {\n    maps = [];\n    for (var i = 0; i < argLen; i++) {\n      maps.push(arguments[i]);\n    }\n  }\n\n  // Create all the movement functions, because if they're created every time\n  // they wouldn't be the same and couldn't be removed.\n  var fns = [];\n  maps.forEach(function (map, index) {\n    fns[index] = sync.bind(null, map, maps.filter(function (o, i) { return i !== index; }));\n  });\n\n  function on () {\n    maps.forEach(function (map, index) {\n      map.on('move', fns[index]);\n    });\n  }\n\n  function off () {\n    maps.forEach(function (map, index) {\n      map.off('move', fns[index]);\n    });\n  }\n\n  // When one map moves, we turn off the movement listeners\n  // on all the maps, move it, then turn the listeners on again\n  function sync (master, clones) {\n    off();\n    moveToMapPosition(master, clones);\n    on();\n  }\n\n  on();\n  return function(){  off(); fns = []; maps = []; };\n}\n\nmodule.exports = syncMaps;\n", "\"use strict\";\n\nvar syncMove = require(\"@mapbox/mapbox-gl-sync-move\");\nvar EventEmitter = require(\"events\").EventEmitter;\n\n/**\n * @param {Object} a The first MapLibre GL Map\n * @param {Object} b The second MapLibre GL Map\n * @param {string|HTMLElement} container An HTML Element, or an element selector string for the compare container. It should be a wrapper around the two map Elements.\n * @param {Object} options\n * @param {string} [options.orientation=vertical] The orientation of the compare slider. `vertical` creates a vertical slider bar to compare one map on the left (map A) with another map on the right (map B). `horizontal` creates a horizontal slider bar to compare on mop on the top (map A) and another map on the bottom (map B).\n * @param {boolean} [options.mousemove=false] If `true` the compare slider will move with the cursor, otherwise the slider will need to be dragged to move.\n * @example\n * var compare = new maplibregl.Compare(beforeMap, afterMap, '#wrapper', {\n *   orientation: 'vertical',\n *   mousemove: true\n * });\n * @see [Swipe between maps](https://maplibre.org/maplibre-gl-js-docs/plugins/)\n */\nfunction Compare(a, b, container, options) {\n  this.options = options ? options : {};\n  this._mapA = a;\n  this._mapB = b;\n  this._horizontal = this.options.orientation === \"horizontal\";\n  this._onDown = this._onDown.bind(this);\n  this._onMove = this._onMove.bind(this);\n  this._onMouseUp = this._onMouseUp.bind(this);\n  this._onTouchEnd = this._onTouchEnd.bind(this);\n  this._ev = new EventEmitter();\n  this._swiper = document.createElement(\"div\");\n  this._swiper.className = this._horizontal\n    ? \"compare-swiper-horizontal\"\n    : \"compare-swiper-vertical\";\n\n  this._controlContainer = document.createElement(\"div\");\n  this._controlContainer.className = this._horizontal\n    ? \"maplibregl-compare maplibregl-compare-horizontal\"\n    : \"maplibregl-compare\";\n  this._controlContainer.className = this._controlContainer.className;\n  this._controlContainer.appendChild(this._swiper);\n\n  if (typeof container === \"string\" && document.body.querySelectorAll) {\n    // get container with a selector\n    var appendTarget = document.body.querySelectorAll(container)[0];\n    if (!appendTarget) {\n      throw new Error(\"Cannot find element with specified container selector.\");\n    }\n    appendTarget.appendChild(this._controlContainer);\n  } else if (container instanceof Element && container.appendChild) {\n    // get container directly\n    container.appendChild(this._controlContainer);\n  } else {\n    throw new Error(\n      \"Invalid container specified. Must be CSS selector or HTML element.\"\n    );\n  }\n\n  this._bounds = b.getContainer().getBoundingClientRect();\n  var swiperPosition =\n    (this._horizontal ? this._bounds.height : this._bounds.width) / 2;\n\n  this._setPosition(swiperPosition);\n\n  this._clearSync = syncMove(a, b);\n  this._onResize = function () {\n    this._bounds = b.getContainer().getBoundingClientRect();\n    if (this.currentPosition) this._setPosition(this.currentPosition);\n  }.bind(this);\n\n  b.on(\"resize\", this._onResize);\n\n  if (this.options && this.options.mousemove) {\n    a.getContainer().addEventListener(\"mousemove\", this._onMove);\n    b.getContainer().addEventListener(\"mousemove\", this._onMove);\n  }\n\n  this._swiper.addEventListener(\"mousedown\", this._onDown);\n  this._swiper.addEventListener(\"touchstart\", this._onDown);\n}\n\nCompare.prototype = {\n  _setPointerEvents: function (v) {\n    this._controlContainer.style.pointerEvents = v;\n    this._swiper.style.pointerEvents = v;\n  },\n\n  _onDown: function (e) {\n    if (e.touches) {\n      document.addEventListener(\"touchmove\", this._onMove);\n      document.addEventListener(\"touchend\", this._onTouchEnd);\n    } else {\n      document.addEventListener(\"mousemove\", this._onMove);\n      document.addEventListener(\"mouseup\", this._onMouseUp);\n    }\n  },\n\n  _setPosition: function (x) {\n    x = Math.min(\n      x,\n      this._horizontal ? this._bounds.height : this._bounds.width\n    );\n    var pos = this._horizontal\n      ? \"translate(0, \" + x + \"px)\"\n      : \"translate(\" + x + \"px, 0)\";\n    this._controlContainer.style.transform = pos;\n    this._controlContainer.style.WebkitTransform = pos;\n    var clipA = this._horizontal\n      ? \"rect(0, 999em, \" + x + \"px, 0)\"\n      : \"rect(0, \" + x + \"px, \" + this._bounds.height + \"px, 0)\";\n    var clipB = this._horizontal\n      ? \"rect(\" + x + \"px, 999em, \" + this._bounds.height + \"px,0)\"\n      : \"rect(0, 999em, \" + this._bounds.height + \"px,\" + x + \"px)\";\n\n    this._mapA.getContainer().style.clip = clipA;\n    this._mapB.getContainer().style.clip = clipB;\n    this.currentPosition = x;\n  },\n\n  _onMove: function (e) {\n    if (this.options && this.options.mousemove) {\n      this._setPointerEvents(e.touches ? \"auto\" : \"none\");\n    }\n\n    this._horizontal\n      ? this._setPosition(this._getY(e))\n      : this._setPosition(this._getX(e));\n  },\n\n  _onMouseUp: function () {\n    document.removeEventListener(\"mousemove\", this._onMove);\n    document.removeEventListener(\"mouseup\", this._onMouseUp);\n    this.fire(\"slideend\", { currentPosition: this.currentPosition });\n  },\n\n  _onTouchEnd: function () {\n    document.removeEventListener(\"touchmove\", this._onMove);\n    document.removeEventListener(\"touchend\", this._onTouchEnd);\n    this.fire(\"slideend\", { currentPosition: this.currentPosition });\n  },\n\n  _getX: function (e) {\n    e = e.touches ? e.touches[0] : e;\n    var x = e.clientX - this._bounds.left;\n    if (x < 0) x = 0;\n    if (x > this._bounds.width) x = this._bounds.width;\n    return x;\n  },\n\n  _getY: function (e) {\n    e = e.touches ? e.touches[0] : e;\n    var y = e.clientY - this._bounds.top;\n    if (y < 0) y = 0;\n    if (y > this._bounds.height) y = this._bounds.height;\n    return y;\n  },\n\n  /**\n   * Set the position of the slider.\n   *\n   * @param {number} x Slider position in pixels from left/top.\n   */\n  setSlider: function (x) {\n    this._setPosition(x);\n  },\n\n  /**\n   * Adds a listener for events of a specified type.\n   *\n   * @param {string} type The event type to listen for; one of `slideend`.\n   * @param {Function} listener The function to be called when the event is fired.\n   * @returns {Compare} `this`\n   */\n  on: function (type, fn) {\n    this._ev.on(type, fn);\n    return this;\n  },\n\n  /**\n   * Fire an event of a specified type.\n   *\n   * @param {string} type The event type to fire; one of `slideend`.\n   * @param {Object} data Data passed to the event listener.\n   * @returns {Compare} `this`\n   */\n  fire: function (type, data) {\n    this._ev.emit(type, data);\n    return this;\n  },\n\n  /**\n   * Removes an event listener previously added with `Compare#on`.\n   *\n   * @param {string} type The event type previously used to install the listener.\n   * @param {Function} listener The function previously installed as a listener.\n   * @returns {Compare} `this`\n   */\n  off: function (type, fn) {\n    this._ev.removeListener(type, fn);\n    return this;\n  },\n\n  remove: function () {\n    this._clearSync();\n    this._mapB.off(\"resize\", this._onResize);\n    var aContainer = this._mapA.getContainer();\n\n    if (!!aContainer) {\n      aContainer.style.clip = null;\n      aContainer.removeEventListener(\"mousemove\", this._onMove);\n    }\n\n    var bContainer = this._mapB.getContainer();\n\n    if (!!bContainer) {\n      bContainer.style.clip = null;\n      bContainer.removeEventListener(\"mousemove\", this._onMove);\n    }\n\n    this._swiper.removeEventListener(\"mousedown\", this._onDown);\n    this._swiper.removeEventListener(\"touchstart\", this._onDown);\n    this._controlContainer.remove();\n  },\n};\n\nif (window.maplibregl) {\n  maplibregl.Compare = Compare;\n} else if (typeof module !== \"undefined\") {\n  module.exports = Compare;\n}\n"],
  "mappings": "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",
  "names": ["i"]
}
